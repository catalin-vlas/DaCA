(function(){angular.module("myApp").controller("EventsController",a);a.$inject=["EventsService","$rootScope"];function a(h,c){var d=this;d.user=null;d.allEvents=null;d.selectedEvent=null;g();function g(){f()}function b(){console.log("********loads user");UserService.getUserByUsername(c.globals.currentUser.username).then(function(i){d.user=i})}function f(){h.getAllEvents().then(function(i){d.allEvents=i;d.allEvents.forEach(function(l){console.log(l);var j=new Date(l.startDate.year,l.startDate.monthValue-1,l.startDate.dayOfMonth,l.startDate.hour,l.startDate.minute,l.startDate.second);var k=Date.now();l.dateString=j.toISOString();l.dateFormattedString=moment(j).format("dddd, D MMMM YYYY [-] HH[:]mm");if(k>j){l.started=true}else{l.started=false}e()})})}function e(){d.selectedEvent=d.allEvents[2]}}})();